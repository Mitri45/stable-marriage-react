(this["webpackJsonpstable-marriage"]=this["webpackJsonpstable-marriage"]||[]).push([[0],{115:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(8),c=t.n(i),o=(t(89),t(12)),l=t.n(o),u=t(18),s=t(28),m=t(23),f=t(24),p=(t(91),t(67)),d=t.n(p),h=t(31),g=t.n(h);function v(e,n){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(l.a.mark((function e(n,t){var a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n.forEach((function(e,n){a.push({rankedUserEmail:e.email,rank:n})})),r={userEmail:t.email,userRole:t.role,rankedList:a},e.prev=3,e.next=6,g.a.post("/ranking",r);case 6:return i=e.sent,e.abrupt("return",i.status);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}var E=t(73),y=t(154),k=t(159),x=t(152),w=t(153),O=t(155),j=t(157),S=t(156),I=t(163),L=t(45),N=t(72),C=t.n(N),U=t(148),J=t(158);function T(){var e=Object(m.a)(["\n  flex: 0 1 auto;\n  margin: 0 1em;\n\n  & p {\n    font-size: 1.5em;\n    color: red;\n  }\n"]);return T=function(){return e},e}function B(){var e=Object(m.a)(["\n  max-width: 50px;\n  min-width: 25px;\n  height: 100%;\n"]);return B=function(){return e},e}function F(){var e=Object(m.a)(["\n  max-width: 150px;\n  flex: 1 1 auto;\n  font-size: 1.2rem;\n  margin: 0 1em;\n  overflow-wrap: break-word;\n  hyphens: auto;\n"]);return F=function(){return e},e}function W(){var e=Object(m.a)(["\n  width: 90px;\n  height: 90px;\n  border-radius: 50%;\n  flex: 0 0 auto;\n  border: solid 1px #cec4c4;\n"]);return W=function(){return e},e}function z(){var e=Object(m.a)(["\n  max-height: 100px;\n  min-width: 360px;\n  border: 1px solid #eeeeee;\n  box-shadow: 4px 3px 3px 0px rgb(28 27 33 / 55%);\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-around;\n  align-items: center;\n  margin-bottom: 1em;\n  padding: 1em 0;\n  background-color: white;\n\n  &.sortable-swap-highlight {\n    background-color: #f9c7c8;\n  }\n\n  &:hover {\n    cursor: move;\n    cursor: -webkit-grabbing;\n  }\n"]);return z=function(){return e},e}function A(){var e=Object(m.a)(["\n  margin-bottom: 2em;\n"]);return A=function(){return e},e}function M(){var e=Object(m.a)(["\n  display: block;\n  width: 240px;\n  margin-top: 4em;\n"]);return M=function(){return e},e}function _(){var e=Object(m.a)(["\n  cursor: grab;\n"]);return _=function(){return e},e}var D=Object(f.a)(U.a)(_()),P=Object(f.a)(x.a)(M()),q=Object(f.a)(w.a)(A());f.a.div(z()),f.a.img(W()),f.a.h2(F()),f.a.img(B()),f.a.div(T());function H(){var e=JSON.parse(localStorage.getItem("validUser")),n=Object(a.useState)((function(){var e=localStorage.getItem("rankingList");return JSON.parse(e)})),t=Object(s.a)(n,2),i=t[0],c=t[1],o=function(){var n=Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(i,e);case 2:200===n.sent&&alert("200");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.createElement(y.a,{maxWidth:"sm"},r.a.createElement(L.a,{variant:"h4",component:"h1"},"Hi, ".concat(e.name,"! Please rate this\n        ").concat("mentor"===e.role?"mentees":"mentors",":")),r.a.createElement(q,null,r.a.createElement(E.a,{list:i,setList:c,onSort:function(e){var n=[];i.forEach((function(e){n.push({name:e.name,surname:e.surname,photo:e.photo,email:e.email})})),localStorage.setItem("rankingList",JSON.stringify(n))},animation:200,easing:"cubic-bezier(1, 0, 0, 1)"},i.map((function(e,n){return r.a.createElement(O.a,{key:e.email,alignItems:"flex-start",divider:!0},0===e.photo.length?r.a.createElement(S.a,null,r.a.createElement(I.a,{alt:e.name,src:d.a})):r.a.createElement(S.a,null,r.a.createElement(I.a,{alt:e.name,src:e.photo})),r.a.createElement(j.a,{primary:"".concat(e.name," ").concat(e.surname),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{component:"span",variant:"body2",color:"textPrimary"},"Current rank: ".concat(n+1)))}),r.a.createElement(J.a,null,r.a.createElement(D,{edge:"end","aria-label":"drag"},r.a.createElement(C.a,null))))})))),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:o,endIcon:r.a.createElement(k.a,null,"send")},"Submit ranking results"),r.a.createElement(P,{color:"secondary",variant:"contained",href:"/",onClick:function(){localStorage.removeItem("validUser"),localStorage.removeItem("rankingList")}},"Choose another account"))}function R(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/user",{params:{email:n}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var $=t(10),G=t(162),K=t(161),Q=function(){var e=Object(a.useState)(""),n=Object(s.a)(e,2),t=n[0],i=n[1],c=Object($.f)(),o=document.getElementById("userNotFound"),m=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.style.display="none",n.preventDefault(),a=t.trim().toLocaleLowerCase(),e.next=5,R(a);case 5:(r=e.sent)?(localStorage.setItem("validUser",JSON.stringify(r[0])),i=[],r[1].forEach((function(e){i.push({id:e["Order ID"],name:e["First Name"],surname:e["Last Name"],photo:e["A recent photo of yourself"],email:e.Email})})),localStorage.setItem("rankingList",JSON.stringify(i)),c.push("/ranking")):document.getElementById("userNotFound").style.display="initial";case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return r.a.createElement(y.a,{maxWidth:"sm",className:"App",style:{backgroundColor:"#cfe8fc",height:"100vh"}},r.a.createElement(L.a,{variant:"h3",gutterBottom:!0,align:"center"},"Stable marriage app"),r.a.createElement(L.a,{variant:"h6",gutterBottom:!0,align:"center"},"Please identify yourself with email address you used for register to this event:"),r.a.createElement("form",{onSubmit:m,style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(K.a,{name:"email",type:"email",variant:"outlined",id:"email",label:"email",required:!0,value:t,onChange:function(e){return i(e.target.value)},style:{marginTop:"2em"}}),r.a.createElement(x.a,{variant:"contained",color:"primary",type:"submit",style:{marginTop:"2em"}},"Check the email"),r.a.createElement(G.a,{severity:"error",id:"userNotFound",style:{display:"none",marginTop:"2em"}},"Sorry, we have not found given email, please try another one")))};function V(){return X.apply(this,arguments)}function X(){return(X=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/match");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Z(e){var n=0;this.email=e,this.fiance=null,this.candidates=[],this.rank=function(e){for(var n=0;n<this.candidates.length;n++)if(this.candidates[n]===e)return n;return this.candidates.length+1},this.prefers=function(e){return this.rank(e)<this.rank(this.fiance)},this.nextCandidate=function(){return n>=this.candidates.length?null:this.candidates[n++]},this.engageTo=function(e){e.fiance&&(e.fiance.fiance=null),e.fiance=this,this.fiance&&(this.fiance.fiance=null),this.fiance=e},this.swapWith=function(e){console.log("%s & %s swap partners",this.email,e.email);var n=this.fiance,t=e.fiance;this.engageTo(t),e.engageTo(n)}}function ee(e,n){var t=e.map((function(e){return new Z(e.userEmail)})),a=n.map((function(e){return new Z(e.userEmail)}));e.forEach((function(e,n){var r,i=[];e.rankedList.forEach((function(e){r=a.findIndex((function(n){return n.email===e.rankedUserEmail})),i.push(a[r])})),t[n].candidates=i})),n.forEach((function(e,n){var r,i=[];e.rankedList.forEach((function(e){r=t.findIndex((function(n){return n.email===e.rankedUserEmail})),i.push(t[r])})),a[n].candidates=i})),console.log(t),console.log(a),function(e){var n;do{n=!0;for(var t=0;t<e.length;t++){var a=e[t];if(!a.fiance){n=!1;var r=a.nextCandidate();r.fiance&&!r.prefers(a)||a.engageTo(r)}}}while(!n)}(t);for(var r=0;r<a.length;r++)console.log("%s is engaged to %s",a[r].email,a[r].fiance.email);for(var i=0;i<t.length;i++)console.log("%s is engaged to %s",t[i].email,t[i].fiance.email);return console.log("Stable = %s",function(e,n){for(var t=0;t<e.length;t++)for(var a=0;a<n.length;a++)if(e[t].prefers(n[a])&&n[a].prefers(e[t]))return!1;return!0}(t,a)?"Yes":"No"),[a,t]}var ne=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],i=n[1],c=Object(a.useState)([]),o=Object(s.a)(c,2),m=o[0],f=o[1],p=Object(a.useState)([]),d=Object(s.a)(p,2),h=d[0],g=d[1],v=function(){var e=Object(u.a)(l.a.mark((function e(){var n,t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t=n[0],a=n[1],r=ee(t,a),i(t),console.log(t),f(a),console.log(a),g(r[0]),console.log(r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("button",{type:"button",style:{fontSize:"1.3rem",padding:"1rem"},onClick:v},"Submit"),r.a.createElement("h2",null,"Mentors ranked by mentees:"),t.map((function(e){return r.a.createElement("div",null,r.a.createElement("h3",{key:e._id},e.userEmail,":"),r.a.createElement("ol",null,e.rankedList.map((function(e){return r.a.createElement("li",{key:e._id},e.rankedUserEmail)}))))})),r.a.createElement("h2",null,"Mentees ranked by mentors:"),m.map((function(e){return r.a.createElement("div",null,r.a.createElement("h3",{key:e._id},e.userEmail,":"),r.a.createElement("ol",null,e.rankedList.map((function(e){return r.a.createElement("li",{key:e._id},e.rankedUserEmail)}))))})),r.a.createElement("h2",null,"Matching pairs:"),h.map((function(e){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",{key:e.email},e.email," is engaged with ",e.fiance.email)))})))},te=localStorage.getItem("validUser");var ae=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($.b,{exact:!0,path:"/"},te?r.a.createElement($.a,{to:"/ranking"}):r.a.createElement(Q,null)),r.a.createElement($.b,{exact:!0,path:"/ranking"},r.a.createElement(H,null)),r.a.createElement($.b,{exact:!0,path:"/matching"},r.a.createElement(ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=t(37);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re.a,null,r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,n,t){e.exports=t.p+"static/media/userAvatar.330f6514.png"},84:function(e,n,t){e.exports=t(115)},89:function(e,n,t){},91:function(e,n,t){e.exports=t.p+"static/media/reorder.eaa32adc.svg"}},[[84,1,2]]]);
//# sourceMappingURL=main.aa8d5f1f.chunk.js.map